# π” Mr. Burger κ°λ° μ§„ν–‰ ν„ν™©

> λ§μ§€λ§‰ μ—…λ°μ΄νΈ: 2025-10-20

## π“‚ ν”„λ΅μ νΈ κµ¬μ΅°

```
burgeria-orderbot/
β”β”€β”€ Z_Burger_v01/                      # ν„μ¬ μ‘μ—… μ¤‘μΈ MVP λ²„μ „
β”‚   β”β”€β”€ Mr_Burger.py                   # λ©”μΈ μ±—λ΄‡ (OpenAI Function Calling)
β”‚   β”β”€β”€ db_functions.py                # DB ν•¨μ (μ‹λ§¨ν‹± κ²€μƒ‰ ν¬ν•¨)
β”‚   β”β”€β”€ setup_embeddings.py            # μ„λ² λ”© μƒμ„± μ¤ν¬λ¦½νΈ
β”‚   β”β”€β”€ test_task_2_*.py               # Sprint 2 ν…μ¤νΈ νμΌ
β”‚   β”β”€β”€ test_task_3_1_semantic_search.py  # μ‹λ§¨ν‹± κ²€μƒ‰ ν…μ¤νΈ
β”‚   β”β”€β”€ test_scenario_sprint2.md       # Sprint 2 μ‹λ‚λ¦¬μ¤ λ¬Έμ„
β”‚   β””β”€β”€ test_scenario_task_3_2.md      # Task 3.2 μ‹λ‚λ¦¬μ¤ λ¬Έμ„
β”β”€β”€ SET.sql                            # DB μ¤ν‚¤λ§ λ° μƒν” λ°μ΄ν„°
β”β”€β”€ spec.md                            # κΈ°λ¥ λ…μ„Έμ„ (λ΅λ“λ§µ)
β”β”€β”€ plan.md                            # μ¤ν”„λ¦°νΈ κ³„ν λ° μ§„ν–‰ μƒνƒ
β””β”€β”€ PROGRESS.md                        # μ΄ νμΌ (μ§„ν–‰ ν„ν™©)
```

---

## β… Sprint 1 μ™„λ£ (MVP κΈ°λ° κµ¬μ¶•)

### κµ¬ν„λ κΈ°λ¥

**1. DB μ¤ν‚¤λ§ (SET.sql)**
- `Products`, `MenuCategory`, `Set_Items`, `Cart`, `Orders`, `Order_Items`
- 74κ° μƒν” λ°μ΄ν„° (λ²„κ±° 19, μ‚¬μ΄λ“ 15, μλ£ 16, ν† ν•‘ 5, μ„ΈνΈ 19)
- β¨ **NEW**: `embedding` μ»¬λΌ μ¶”κ°€ (μ‹λ§¨ν‹± κ²€μƒ‰μ©)

**2. findProduct ν•¨μ (db_functions.py)**
- ~~SQL LIKE κΈ°λ° κ²€μƒ‰~~ β†’ β¨ **μ„λ² λ”© κΈ°λ° μ‹λ§¨ν‹± κ²€μƒ‰μΌλ΅ μ—…κ·Έλ μ΄λ“**
- OpenAI `text-embedding-3-small` λ¨λΈ μ‚¬μ©
- μ½”μ‚¬μΈ μ μ‚¬λ„ κ³„μ‚°
- **μƒνƒ κµ¬λ¶„**: `FOUND`, `AMBIGUOUS`, `NOT_FOUND`, `ERROR`
- μΉ΄ν…κ³ λ¦¬ ν•„ν„° μ§€μ›
- μ¬κ³  ν™•μΈ ν¬ν•¨

**3. addToCart ν•¨μ (db_functions.py)**
- λ‹¨ν’ λ©”λ‰΄ μ¥λ°”κµ¬λ‹ μ¶”κ°€
- β¨ **μ„ΈνΈ λ©”λ‰΄ μ§€μ›** (Sprint 2μ—μ„ μ¶”κ°€λ¨)
- μλ‰ μ²λ¦¬ μ§€μ›
- `set_group_id`λ΅ μ„ΈνΈ κµ¬μ„±ν’ κ·Έλ£Ήν™”
- `special_requests` ν•„λ“λ΅ μµμ… λ³€κ²½μ‚¬ν•­ κΈ°λ΅

**4. getSetComposition ν•¨μ (db_functions.py)**
- β¨ **Sprint 2μ—μ„ μ¶”κ°€λ¨**
- μ„ΈνΈ μƒν’ ID β†’ κΈ°λ³Έ κµ¬μ„±ν’ λ©λ΅ λ°ν™
- μΉ΄ν…κ³ λ¦¬ κ²€μ¦ μ§€μ›

**5. OpenAI Function Calling (Mr_Burger.py)**
- findProduct, addToCart, getSetComposition μλ™ νΈμ¶
- session_id μλ™ μ£Όμ…
- λ€ν™” κΈ°λ΅ κ΄€λ¦¬ (tool_calls ν¬ν•¨)
- β¨ **AMBIGUOUS μƒνƒ μ²λ¦¬ λ΅μ§ μ¶”κ°€** (Sprint 3μ—μ„ μ¶”κ°€λ¨)

**6. μ‹μ¤ν… ν”„λ΅¬ν”„νΈ**
- product_id μ •ν™•μ„± λ³΄μ¥
- μλ‰ νμ‹± λ° λ°μ
- μ£Όλ¬Έ ν”„λ΅μ„Έμ¤ κ°€μ΄λ“
- β¨ **μ„ΈνΈ μµμ… λ³€κ²½ ν”„λ΅μ„Έμ¤** (Sprint 2μ—μ„ μ¶”κ°€λ¨)
- β¨ **λ¨νΈν• κ²€μƒ‰ μ‹ μ„ νƒμ§€ μ μ‹ λ΅μ§** (Sprint 3μ—μ„ μ¶”κ°€λ¨)

---

## β… Sprint 2 μ™„λ£ (μ„ΈνΈ λ©”λ‰΄ λ° λ€ν™”ν• κ²€μ¦)

### Task 2.1: getSetComposition ν•¨μ β…
- μ„ΈνΈ μƒν’ IDλ΅ κΈ°λ³Έ κµ¬μ„±ν’ μ΅°ν
- μ: `G00001` β†’ ν•μ°λ¶κ³ κΈ°λ²„κ±°, ν¬ν…μ΄ν† , μ½λΌ
- λ‹¨μ„ ν…μ¤νΈ ν†µκ³Ό (test_task_2_1.py)

### Task 2.2: addToCart μ„ΈνΈ λ©”λ‰΄ μ§€μ› β…
- `set_group_id`λ΅ κµ¬μ„±ν’ κ·Έλ£Ήν™”
- λ¨λ“  κµ¬μ„±ν’μ„ Cart ν…μ΄λΈ”μ— μ¶”κ°€
- μ„ΈνΈ μλ‰ μ²λ¦¬ (κ° κµ¬μ„±ν’ μλ‰ λ™μΌν•κ² μ¦κ°€)
- ν†µν•© ν…μ¤νΈ ν†µκ³Ό (test_task_2_2.py)

### Task 2.3: μµμ… λ³€κ²½ λ€ν™” λ΅μ§ β…
- μ„ΈνΈ κµ¬μ„±ν’ λ³€κ²½ μ‹λ‚λ¦¬μ¤ μ§€μ›
- κ°€κ²© μ°¨μ΄ κ³„μ‚° λ° κ³ κ° ν™•μΈ
- μΉ΄ν…κ³ λ¦¬ κ²€μ¦ (μ‚¬μ΄λ“β†’μ‚¬μ΄λ“, μλ£β†’μλ£λ§ κ°€λ¥)
- `special_requests` ν•„λ“μ— λ³€κ²½μ‚¬ν•­ κΈ°λ΅
- ν†µν•© ν…μ¤νΈ ν†µκ³Ό (test_task_2_3_integration.py)

### ν…μ¤νΈ μ™„λ£ μ‹λ‚λ¦¬μ¤

```
κ³ κ°: "ν•μ°λ¶κ³ κΈ°λ²„κ±° μ„ΈνΈ μ£Όμ„Έμ”"
β†’ findProduct("ν•μ°λ¶κ³ κΈ°λ²„κ±° μ„ΈνΈ") β†’ G00001
β†’ "10,200μ›μ…λ‹λ‹¤. λ‹΄μ•„λ“λ¦΄κΉμ”?"
κ³ κ°: "λ„¤"
β†’ addToCart(session_id, "G00001", quantity=1)
β†’ μ¥λ°”κµ¬λ‹μ— 3κ° ν•­λ© μ¶”κ°€ (λ²„κ±°, μ‚¬μ΄λ“, μλ£)
```

```
κ³ κ°: "ν•μ°λ¶κ³ κΈ°λ²„κ±° μ„ΈνΈμ—μ„ κ°μν€κΉ€μ„ μ–‘λ…κ°μ(μΉ λ¦¬)λ΅ λ°”κΏ”μ£Όμ„Έμ”"
β†’ getSetComposition("G00001") β†’ ν¬ν…μ΄ν†  2000μ› ν™•μΈ
β†’ findProduct("μ–‘λ…κ°μ μΉ λ¦¬") β†’ 2600μ›
β†’ μ¶”κ°€κΈ κ³„μ‚°: 600μ›
β†’ "μ–‘λ…κ°μ(μΉ λ¦¬)λ΅ λ³€κ²½ν•μ‹λ©΄ 600μ› μ¶”κ°€λ©λ‹λ‹¤. λ³€κ²½ν•μ‹κ² μµλ‹κΉ?"
κ³ κ°: "λ„¤"
β†’ addToCart(session_id, "G00001", special_requests="ν¬ν…μ΄ν† β†’μ–‘λ…κ°μ(μΉ λ¦¬)")
```

---

## π”„ Sprint 3 μ§„ν–‰ μ¤‘ (κ²€μƒ‰ κ³ λ„ν™” λ° UX κ°μ„ )

### Task 3.1: findProduct μ‹λ§¨ν‹± κ²€μƒ‰ μ—…κ·Έλ μ΄λ“ β…

**κµ¬ν„ λ‚΄μ©:**
1. **μ„λ² λ”© μ‹μ¤ν… κµ¬μ¶•**
   - Products ν…μ΄λΈ”μ— `embedding` μ»¬λΌ μ¶”κ°€
   - OpenAI `text-embedding-3-small` λ¨λΈ μ‚¬μ©
   - 74κ° μ „μ²΄ μƒν’ μ„λ² λ”© μƒμ„± λ° μ €μ¥

2. **μ‹λ§¨ν‹± κ²€μƒ‰ ν•¨μ**
   - μΏΌλ¦¬ μ„λ² λ”© μƒμ„±
   - μ½”μ‚¬μΈ μ μ‚¬λ„ κ³„μ‚°
   - μ μ‚¬λ„ μ„κ³„κ°’: 0.50
   - λ¨νΈμ„± μ„κ³„κ°’: 0.08

3. **μƒνƒ λ°ν™ λ΅μ§**
   - `FOUND`: λ…ν™•ν• 1κ° κ²°κ³Ό
   - `AMBIGUOUS`: μ—¬λ¬ μ μ‚¬ν• κ²°κ³Ό (μ μ μ°¨μ΄ < 0.08)
   - `NOT_FOUND`: λ§¤μΉ­λλ” μƒν’ μ—†μ
   - `ERROR`: μ¤λ¥ λ°μƒ

**ν…μ¤νΈ κ²°κ³Ό:**
- β… μ •ν™•ν• λ©”λ‰΄λ… κ²€μƒ‰
- β… μλ―Έ κΈ°λ° κ²€μƒ‰ ("λ§¤μ½¤ν• κ°μ" β†’ NOT_FOUND, μ„κ³„κ°’ μ΅°μ • ν•„μ”)
- β… λ¨νΈν• κ²€μƒ‰ ("μ–‘λ…κ°μ" β†’ AMBIGUOUS, 4κ° ν›„λ³΄)
- β… μΉ΄ν…κ³ λ¦¬ ν•„ν„°
- β… μ„ΈνΈ λ©”λ‰΄ κ²€μƒ‰

### Task 3.2: λ¨νΈμ„± μ²λ¦¬ λ€ν™” λ΅μ§ β…

**κµ¬ν„ λ‚΄μ©:**
1. **μ‹μ¤ν… ν”„λ΅¬ν”„νΈ μ—…λ°μ΄νΈ**
   - AMBIGUOUS μƒνƒ μ²λ¦¬ λ΅μ§ μ¶”κ°€
   - μ„ νƒμ§€ μ μ‹ κ·μΉ™ λ…ν™•ν™”
   - λ²νΈ/ν…μ¤νΈ μ„ νƒ λ¨λ‘ μ§€μ›

2. **μ„κ³„κ°’ μ΅°μ •**
   - `similarity_threshold`: 0.60 β†’ 0.50
   - `ambiguity_threshold`: 0.02 β†’ 0.08

**μμ‹:**
```
κ³ κ°: "μ–‘λ…κ°μ μ£Όμ„Έμ”"
λ΄‡: "μ–‘λ…κ°μλ” 4κ°€μ§€ λ§›μ΄ μμµλ‹λ‹¤. μ–΄λ–¤ κ²ƒμΌλ΅ λ“λ¦΄κΉμ”?
     1. μ–‘λ…κ°μ (μ–΄λ‹μ–Έ) - 2,600μ›
     2. μ–‘λ…κ°μ (μΉ λ¦¬) - 2,600μ›
     3. μ–‘λ…κ°μ (μΉμ¦) - 2,600μ›
     4. μ–‘λ…κ°μ (μ‹¤λΉ„κΉ€μΉ) - 2,600μ›"

κ³ κ°: "μΉ λ¦¬λ΅ μ£Όμ„Έμ”" (λλ” "2λ²")
λ΄‡: "μ–‘λ…κ°μ (μΉ λ¦¬) 2,600μ›μ…λ‹λ‹¤. μ¥λ°”κµ¬λ‹μ— λ‹΄μ•„λ“λ¦΄κΉμ”?"
```

**ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ λ¬Έμ„ μ‘μ„±:**
- test_scenario_task_3_2.md (5κ° μ‹λ‚λ¦¬μ¤)
- μ‹¤μ  μ±—λ΄‡ ν…μ¤νΈ μ§„ν–‰λ¨ (μΌλ¶€ μμ • ν•„μ”)

### Task 3.3: μ¥λ°”κµ¬λ‹ κ΄€λ¦¬ ν•¨μ π“‹ λ€κΈ°
- `getCartDetails`: μ¥λ°”κµ¬λ‹ μ΅°ν
- `updateCartItem`: μλ‰ λ³€κ²½
- `clearCart`: μ¥λ°”κµ¬λ‹ λΉ„μ°κΈ°

---

## π“ μ „μ²΄ μ§„ν–‰ ν„ν™©

| Sprint | μƒνƒ | μ™„λ£μ¨ | λΉ„κ³  |
|--------|------|--------|------|
| Sprint 1 (MVP) | β… μ™„λ£ | 5/6 | λ¦¬λ·° μ μ™Έ |
| Sprint 2 (μ„ΈνΈ λ©”λ‰΄) | β… μ™„λ£ | 3/4 | λ¦¬λ·° μ μ™Έ, ν…μ¤νΈ λ¨λ‘ ν†µκ³Ό |
| Sprint 3 (κ²€μƒ‰ κ³ λ„ν™”) | π”„ μ§„ν–‰ μ¤‘ | 2/4 | μ‹λ§¨ν‹± κ²€μƒ‰ + λ¨νΈμ„± μ²λ¦¬ μ™„λ£ |
| Sprint 4 (μ£Όλ¬Έ μ™„λ£) | π“‹ λ€κΈ° | 0/4 | - |

**μ΄ μ§„ν–‰λ¥ : 10/18 (55.6%)**

---

## π― ν•µμ‹¬ νμΌ

| νμΌ | μ—­ν•  | μµκ·Ό μ—…λ°μ΄νΈ |
|-----|------|--------------|
| `Z_Burger_v01/Mr_Burger.py` | λ©”μΈ μ±—λ΄‡ | Task 3.2 (AMBIGUOUS μ²λ¦¬ λ΅μ§) |
| `Z_Burger_v01/db_functions.py` | DB ν•¨μ | Task 3.1 (μ‹λ§¨ν‹± κ²€μƒ‰) |
| `Z_Burger_v01/setup_embeddings.py` | μ„λ² λ”© μƒμ„± | Task 3.1μ—μ„ μ¶”κ°€ |
| `SET.sql` | DB μ¤ν‚¤λ§ | embedding μ»¬λΌ μ¶”κ°€ |
| `spec.md` | κΈ°λ¥ λ…μ„Έ | - |
| `plan.md` | μ§„ν–‰ μƒν™© | 2025-10-20 μ—…λ°μ΄νΈ |

---

## π—„οΈ DB μ •λ³΄

- **κ²½λ΅**: `C:\data\BurgeriaDB.db`
- **μ£Όμ” ν…μ΄λΈ”**:
  - `Products`: μƒν’ μ •λ³΄ (product_id, product_name, product_type, price, **embedding**)
  - `Cart`: μ¥λ°”κµ¬λ‹ (cart_item_id, session_id, product_id, quantity, set_group_id)
  - `Set_Items`: μ„ΈνΈ κµ¬μ„±ν’ (set_product_id, component_product_id, is_default)
  - `Orders`, `Order_Items`: μ£Όλ¬Έ κΈ°λ΅ (Sprint 4μ—μ„ μ‚¬μ© μμ •)

---

## π”§ μ£Όμ” μ„¤μ •

- **OpenAI λ¨λΈ**: `gpt-4o-mini`
- **μ„λ² λ”© λ¨λΈ**: `text-embedding-3-small`
- **Function Calling**: `tools` λ°°μ—΄μ— ν•¨μ μ •μ
- **Session κ΄€λ¦¬**: ν”„λ΅κ·Έλ¨ μ‹μ‘ μ‹ UUID μƒμ„±
- **κ²€μƒ‰ μ„κ³„κ°’**:
  - `similarity_threshold`: 0.50
  - `ambiguity_threshold`: 0.08

---

## π€ λ‹¤μ μ‘μ—… (Sprint 3 μ™„λ£ λ° Sprint 4)

### Task 3.3: μ¥λ°”κµ¬λ‹ κ΄€λ¦¬ ν•¨μ κµ¬ν„
- `getCartDetails(session_id)`: μ¥λ°”κµ¬λ‹ μ „μ²΄ μ΅°ν
- `updateCartItem(cart_item_id, quantity)`: μλ‰ λ³€κ²½
- `clearCart(session_id)`: μ¥λ°”κµ¬λ‹ λΉ„μ°κΈ°

### Sprint 4: μ£Όλ¬Έ μ™„λ£ λ° μ‹μ¤ν… μ•μ •ν™”
- Task 4.1: `processOrder` ν•¨μ (μ£Όλ¬Έ μƒμ„±)
- Task 4.2: μ¤λ¥ μ²λ¦¬ λ° λ΅κΉ…
- Task 4.3: ν†µν•© ν…μ¤νΈ λ° λ²„κ·Έ μμ •

---

## π“ μ‘μ—… μ¬κ° μ‹ μ²΄ν¬λ¦¬μ¤νΈ

1. β… `plan.md` μ½κ³  ν„μ¬ Task ν™•μΈ
2. β… `spec.md`μ—μ„ ν•΄λ‹Ή Task μƒμ„Έ λ‚΄μ© ν™•μΈ
3. β… `Z_Burger_v01/` ν΄λ”μ—μ„ μ½”λ“ μ‘μ„±
4. β… ν…μ¤νΈ ν›„ `plan.md` μƒνƒ μ—…λ°μ΄νΈ
5. β… μ™„λ£ μ‹ `PROGRESS.md` μ—…λ°μ΄νΈ
6. β… μ™„λ£ μ‹ λ‹¤μ Taskλ΅ μ΄λ™

---

## π› μ•λ ¤μ§„ μ΄μ λ° TODO

### Task 3.2 κ΄€λ ¨
- [ ] λ¨νΈμ„± μ²λ¦¬ λ΅μ§ μ‹¤μ  μ±—λ΄‡ ν…μ¤νΈμ—μ„ μΌλ¶€ μμ • ν•„μ”
- [ ] λ²νΈ μ„ νƒ μ‹ μΈλ±μ‹± λ΅μ§ κ²€μ¦ ν•„μ”

### μΌλ°
- [ ] μ„λ² λ”© μ—…λ°μ΄νΈ μλ™ν™” (μƒ μƒν’ μ¶”κ°€ μ‹)
- [ ] μ„±λ¥ μµμ ν™” (μ„λ² λ”© μΊμ‹±)
- [ ] μ¤ν”„λΌμΈ λ¨λ“ μ§€μ› (SequenceMatcher fallback)

---

## π“ κ°λ° νƒ€μ„λΌμΈ

- **2025-10-03**: Sprint 1 μ™„λ£ (MVP)
- **2025-10-20**: Sprint 2 μ™„λ£ (μ„ΈνΈ λ©”λ‰΄)
- **2025-10-20**: Sprint 3 Task 3.1, 3.2 μ™„λ£ (μ‹λ§¨ν‹± κ²€μƒ‰ + λ¨νΈμ„± μ²λ¦¬)
- **Next**: Task 3.3 (μ¥λ°”κµ¬λ‹ κ΄€λ¦¬) β†’ Sprint 4 (μ£Όλ¬Έ μ™„λ£)
